(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[35],{115:function(e,t,a){"use strict";a(1);var n=a(129),s=a(2);t.a=e=>{let{title:t}=e;return Object(s.jsx)(n.a,{children:Object(s.jsx)("title",{children:t})})}},176:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"f",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"g",(function(){return d})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return u}));var n=a(6),s=a(12),r=a.n(s);const c=e=>async t=>{try{t({type:n.f});const a={headers:{"Content-Type":"application/json"}},{data:s}=await r.a.post("/api/v1/order/new",e,a);t({type:n.g,payload:s})}catch(a){t({type:n.e,payload:a.response.data.message})}},i=()=>async e=>{try{e({type:n.m});const{data:t}=await r.a.get("/api/v1/orders/me");e({type:n.n,payload:t.orders})}catch(t){e({type:n.l,payload:t.response.data.message})}},o=()=>async e=>{try{e({type:n.b});const{data:t}=await r.a.get("/api/v1/admin/orders");e({type:n.c,payload:t.orders})}catch(t){e({type:n.a,payload:t.response.data.message})}},d=(e,t)=>async a=>{try{a({type:n.s});const s={headers:{"Content-Type":"application/json"}},{data:c}=await r.a.put(`/api/v1/admin/order/${e}`,t,s);a({type:n.u,payload:c.success})}catch(s){a({type:n.r,payload:s.response.data.message})}},p=e=>async t=>{try{t({type:n.i});const{data:a}=await r.a.delete(`/api/v1/admin/order/${e}`);t({type:n.k,payload:a.success})}catch(a){t({type:n.h,payload:a.response.data.message})}},l=e=>async t=>{try{t({type:n.p});const{data:a}=await r.a.get(`/api/v1/order/${e}`);t({type:n.q,payload:a.order})}catch(a){t({type:n.o,payload:a.response.data.message})}},u=()=>async e=>{e({type:n.d})}},227:function(e,t,a){"use strict";var n=a(1),s=a(183),r=a(420),c=a(373),i=a(415),o=a(258),d=a.n(o),p=a(259),l=a.n(p),u=a(260),y=a.n(u),j=(a(228),a(2));t.a=e=>{let{activeStep:t}=e;const a=[{label:Object(j.jsx)(s.a,{children:"Shipping Details"}),icon:Object(j.jsx)(d.a,{})},{label:Object(j.jsx)(s.a,{children:"Confirm Order"}),icon:Object(j.jsx)(l.a,{})},{label:Object(j.jsx)(s.a,{children:"Payment"}),icon:Object(j.jsx)(y.a,{})}];return Object(j.jsx)(n.Fragment,{children:Object(j.jsx)(r.a,{alternativeLabel:!0,activeStep:t,style:{boxSizing:"border-box"},children:a.map(((e,a)=>Object(j.jsx)(c.a,{active:t===a,completed:t>=a,children:Object(j.jsx)(i.a,{style:{color:t>=a?"tomato":"rgba(0, 0, 0, 0.649)"},icon:e.icon,children:e.label})},a)))})})}},228:function(e,t,a){},261:function(e,t,a){"use strict";var n=a(101),s=a(102);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a(1)),c=(0,n(a(103)).default)(r.createElement("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"VpnKey");t.default=c},288:function(e,t,a){},289:function(e,t,a){"use strict";var n=a(101),s=a(102);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a(1)),c=(0,n(a(103)).default)(r.createElement("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"}),"CreditCard");t.default=c},290:function(e,t,a){"use strict";var n=a(101),s=a(102);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a(1)),c=(0,n(a(103)).default)(r.createElement("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Event");t.default=c},372:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(227),r=a(19),c=a(115),i=a(183),o=a(25),d=a(44),p=a(12),l=a.n(p),u=(a(288),a(289)),y=a.n(u),j=a(290),m=a.n(j),b=a(261),h=a.n(b),f=a(176),v=a(2);t.default=e=>{let{history:t}=e;const a=JSON.parse(sessionStorage.getItem("orderInfo")),p=Object(r.b)(),u=Object(o.d)(),j=Object(d.useStripe)(),b=Object(d.useElements)(),O=Object(n.useRef)(null),{shippingInfo:x,cartItems:g}=Object(r.c)((e=>e.cart)),{user:C}=Object(r.c)((e=>e.user)),{error:I}=Object(r.c)((e=>e.newOrder)),P={amount:Math.round(100*a.totalPrice)},w={shippingInfo:x,orderItems:g,itemsPrice:a.subtotal,taxPrice:a.tax,shippingPrice:a.shippingCharges,totalPrice:a.totalPrice};return Object(n.useEffect)((()=>{I&&(u.error(I),p(Object(f.a)()))}),[p,I,u]),Object(v.jsxs)(n.Fragment,{children:[Object(v.jsx)(c.a,{title:"Payment"}),Object(v.jsx)(s.a,{activeStep:2}),Object(v.jsx)("div",{className:"paymentContainer",children:Object(v.jsxs)("form",{className:"paymentForm",onSubmit:e=>(async e=>{e.preventDefault(),O.current.disabled=!0;try{const e={headers:{"Content-Type":"application/json"}},{data:a}=await l.a.post("/api/v1/payment/process",P,e),n=a.client_secret;if(!j||!b)return;const s=await j.confirmCardPayment(n,{payment_method:{card:b.getElement(d.CardNumberElement),billing_details:{name:C.name,email:C.email,address:{line1:x.address,city:x.city,state:x.state,postal_code:x.pinCode,country:x.country}}}});s.error?(O.current.disabled=!1,u.error(s.error.message)):"succeeded"===s.paymentIntent.status?(w.paymentInfo={id:s.paymentIntent.id,status:s.paymentIntent.status},p(Object(f.b)(w)),t.push("/success")):u.error("There's some issue while processing payment ")}catch(I){O.current.disabled=!1,u.error(I.response.data.message)}})(e),children:[Object(v.jsx)(i.a,{children:"Card Info"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(y.a,{}),Object(v.jsx)(d.CardNumberElement,{className:"paymentInput"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(m.a,{}),Object(v.jsx)(d.CardExpiryElement,{className:"paymentInput"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.a,{}),Object(v.jsx)(d.CardCvcElement,{className:"paymentInput"})]}),Object(v.jsx)("input",{type:"submit",value:`Pay - $${a&&a.totalPrice}`,ref:O,className:"paymentFormBtn"})]})})]})}}}]);
//# sourceMappingURL=35.0a3c2904.chunk.js.map